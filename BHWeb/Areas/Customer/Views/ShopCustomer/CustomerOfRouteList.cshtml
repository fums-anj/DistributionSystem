@model IEnumerable<ShopCustomer>
@{
    ViewData["Title"] = "Route Customer List";
    Layout = "~/Views/Shared/_LayoutNoNAV.cshtml";
    int srno = 0;
    double total = 0;
}

<div class="ignorForPrint">
    <div style="margin-top: 1rem !important; padding-bottom: 0rem !important;">
        <div class="row">
            <div class="col-3 d-flex justify-content-between">
                <button id="print" autofocus class="btn btn-primary col-4">Print</button>
                <a asp-area="Customer" asp-controller="CustomerRoute" asp-action="Index"
                   class="btn btn-success mx-2"> <i class="bi bi-bootstrap-reboot"> Back to Route List</i></a>
            </div>
        </div>
    </div>
</div>
<div class="p-3">
    <div class="row pt-4">
        <div class="col-6">
            <h2 class="text-primary">@Model.FirstOrDefault().CustomerRoute.RouteName Customer List</h2>
        </div>
    </div>
    <br /><br />

    <table id="tblData" class="table table-bordered table-striped" style="width:100%">
        <thead>
            <tr>
                <th>Sr #</th>
                <th>@Html.DisplayNameFor(model => model.CustomerName)</th>
                <th>@Html.DisplayNameFor(model => model.CustomerPhone)</th>
                <th>@Html.DisplayNameFor(model => model.CustomerAddress)</th>
                <th>@Html.DisplayNameFor(model => model.Balance)</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var obj in Model)
            {
                srno++;
                if (obj.Balance != null)
                {

                    total += (double)obj.Balance;
                   
                }
                <tr>
                    <td>
                        @srno
                    </td>
                    <td>
                        @Html.DisplayFor(m => obj.CustomerCode) -
                        @Html.DisplayFor(m => obj.CustomerName)
                    </td>
                    <td>
                        @Html.DisplayFor(m => obj.CustomerPhone)
                    </td>
                    <td>
                        @Html.DisplayFor(m => obj.CustomerAddress)
                    </td>
                    <td align="right">
                        @Html.DisplayFor(m => obj.Balance)
                    </td>
                </tr>
                total = Math.Round((double)total, 2);
            }
        </tbody>
        <tfoot>
            <tr align="right">
                <th class="w-20" colspan="4">Total</th>
                <th class="w-20">@total.ToString("#.##")</th>
            </tr>
        </tfoot>
    </table>
</div>

@section Scripts {
    @{
        <partial name="_ValidationScriptsPartial" />
    }
    <script>
        $(document).ready(function () {
            $("#print").click(function () {
                $(".ignorForPrint").hide();
                window.print();
                $(".ignorForPrint").show();
            });
        });
    </script>
}